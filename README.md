# Datapack-Compiler
## 프로젝트 설명
이 프로젝트는 마인크래프트 컴파일러를 만드는 프로젝트입니다.   
40행성(40planet)에 의해 제작되었으며, 출처만 표기한다면 자유로운 사용을 허가합니다.

## 문법
### 기본 문법
- 모든 명령어는 함수 안에서 작성되어야 한다. 만약 그렇지 않는다면 에러가 발생한다
```
int a = 1
def test(){
	a = 3
}
```
위의 경우, `int a = 1`이라는 구문이 그 어떠한 함수에도 속해있지 않기 때문에 에러가 발생한다
- `tick`, `load`는 각각 `tick.json`, `load.json`에 들어가는 함수이다
### 자료형 목록
- int
	- `1`, `-2`, `100`과 같은 정수 자료형
- float, double
	- `1.0`, `3.14`와 같은 소수 자료형
- string
	- `"This is string"`과 같은 문자열 자료형
- entity
	- `@a[tag=player]`와 같은 선택인자 자료형
- nbt
	- `{id:"minecraft:block_display",Tags:["temp"]}`와 같은 json 자료형
### 변수 선언
다른 언어와 마찬가지로 `<자료형> <변수명>`의 형태로 선언한다
```
int a
float b = 2.0
entity c = @p[tag=player]
```

배열 선언은 아래와 같이 `<자료형>[] <변수명>`으로 선언한다
```
int[] array = [1, 2, 3]
float[] array_2
```
   
모든 변수는 스토리지에 저장되며, `<변수명>[-1]`로 접근 가능하다   
배열도 마찬가지이다
```
data get storage 40planet:value a[-1]
```
만약 선언 이후, 값을 지정해주지 않는다면 각 자료형에 따른 기본값은 아래와 같다
- int - `0`
- float - `0f`
- double - `0d`
- string - `""`
- entity - `""`
- nbt - `{}`
- 모든 배열 - `[]`

### 지역변수
지역변수는 현재 일부만 구현되어 불안정한 상태이다   
웬만하면 변수 명을 전부 다르게 하는 것을 추천한다
### 줄바꿈
`\n` 또는 `;`를 명령어의 끝으로 생각한다
- 단, `[`, `{` 등의 몇몇 예외가 있다
```
int a
nbt b = {
	test: "asdf"
}
```

```
int a;
nbt b = {
	test: "asdf"
};
```
### 연산
괄호 > 멤버 > 산술 > 관계(부등식) > 논리(and, or) > 대입 순으로 연산이 진행된다
- 괄호
	- `()`
- 멤버(배열의 원소에 접근하는 연산)
	- `[]`
- 산술
	- `+`
	- `-`
	- `*`
	- `/`
	- `%`
- 관계
	- `==`
	- `!=`
	- `<=`
	- `>=`
	- `<`
	- `>`
- 논리
	- `and`
	- `or`
	- `not`
- 대입
	- `=`
만약 연산의 피연산자들의 자료형이 서로 다른 경우, 에러가 발생한다   
단, `double`과 `float`의 경우엔 에러가 나지 않는다
```
1 + 1.0
```

```
Runtime Error: Diffrent Type
File FILENAME, line 2

    1 + 1.0
      ^
```
### 조건문
`if( <조건> ){ ~~~ }`와 같은 형식으로 작성한다   
중괄호를 생략하는 경우, 조건 다음의 명령어 한 줄만 실행한다.
```
int a = 0;
if(a == 0){
	a = a + 1;
}
```

```
int a = 0
if(a == 0)
	a = a + 1
```
`if (...) {...} else {...}`과 같은 형태로 else를 사용할 수 있다   
마찬가지로 중괄호를 생략하는 경우, 한 줄의 명령어만 실행된다
```
int a = 0
if(a == 1){
	a = a + 1
} else {
	a = a - 1
}
```

```
int a = 0
if(a == 1){
	a = a + 1
} else
	a = a - 1
```
중괄호를 생략하면 다음 한 줄의 명령어만 실행하기 때문에 `else if` 구문도 지원한다
```
int a = 0
if(a == 1){
	a = a + 1
} else if (a == 0){
	a = a + 2
}
```
### 반복문
`while`의 경우, `if`와 같은 형태로 적을 수 있다
```
int a = 0
while(a < 10){
	a = a + 1
}
```

```
int a = 0
while(a < 10)
	a = a + 1
```
`break` 키워드를 통해 루프를 멈출 수 있다   
`for`는 지원하지 않는다

### 함수 선언
`def [자료형] <함수명>( [매개변수] ){...}`의 형태로 적어 함수를 선언할 수 있다   
`[자료형]`을 생략하면 함수의 반환 자료형은 `void(없음)`으로 설정된다   
`[매개변수]`는 필요에 따라 생략해도 된다   
`[자료형]`을 적었더라도 꼭 값을 반환할 필요는 없다
```
def tick(){
	int a = 1
}
```

```
def int test(int a, float b){
	a = 3
	b = 0.5
}
```
함수 이름에 대문자를 사용하면 마인크래프트는 그 함수를 그냥 없는 것으로 생각한다
~~멍청이이다~~
### 함수 호출
`함수명(인자)`와 같이 작성하여 함수를 호출 할 수 있다   
이때, 매개변수와 인자의 자료형이 다르면 에러가 발생한다
```
def dumb_function(int a){
	return a
}

def load(){
	dumb_function(3)
}
```
### 마인크래프트 명령어
`/`를 맨 앞에 쓰면 그것은 마인크래프트 명령어로 인식한다
```
/say a
/gamemode creative @a
```

### 주석
`#` 또는 `/#`을 사용해 주석을 달 수 있다
```
# 데이터팩에 적히지 않는 주석
/# 데이터팩에 적히는 주석
```
